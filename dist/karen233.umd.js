(function(g,m){typeof exports=="object"&&typeof module!="undefined"?m(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],m):(g=typeof globalThis!="undefined"?globalThis:g||self,m(g.karen233={},g.React))})(this,function(g,m){"use strict";var ct=Object.defineProperty;var ft=(g,m,Y)=>m in g?ct(g,m,{enumerable:!0,configurable:!0,writable:!0,value:Y}):g[m]=Y;var V=(g,m,Y)=>(ft(g,typeof m!="symbol"?m+"":m,Y),Y);function Y(h){if(h&&h.__esModule)return h;var o=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});return h&&Object.keys(h).forEach(function(a){if(a!=="default"){var l=Object.getOwnPropertyDescriptor(h,a);Object.defineProperty(o,a,l.get?l:{enumerable:!0,get:function(){return h[a]}})}}),o.default=h,Object.freeze(o)}var B=Y(m);const q=Symbol("default-event-name");class Q{constructor(){V(this,"listeners",[])}emit(o){this.listeners.filter(a=>a.eventName===q).forEach(a=>a.callback(o))}listen(o){const a=typeof o=="function"?{eventName:q,callback:o}:o;return this.listeners.push(a),a}emitWithEventName(o,a){this.listeners.filter(l=>l.eventName===o).forEach(l=>l.callback(a))}unlisten(o){this.listeners=this.listeners.filter(a=>a!==o)}}function K(h){const o=new Q;let a=h;function l(){const[j,E]=m.useState(a);return m.useEffect(()=>{const v=o.listen(S=>E(S));return()=>o.unlisten(v)},[]),[j,v=>{a=v,o.emit(v)}]}return l.use=l,l.reset=()=>o.emit(h),Object.defineProperty(l,"val",{get:()=>Object.freeze(a)}),l}var nt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},X={exports:{}};(function(h,o){(function(a,l){h.exports=l()})(nt,function(){var a=1e3,l=6e4,j=36e5,E="millisecond",M="second",v="minute",S="hour",y="day",_="week",b="month",U="quarter",O="year",T="date",L="Invalid Date",st=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,ut=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,at={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},G=function(u,n,t){var r=String(u);return!r||r.length>=n?u:""+Array(n+1-r.length).join(t)+u},ot={s:G,z:function(u){var n=-u.utcOffset(),t=Math.abs(n),r=Math.floor(t/60),e=t%60;return(n<=0?"+":"-")+G(r,2,"0")+":"+G(e,2,"0")},m:function u(n,t){if(n.date()<t.date())return-u(t,n);var r=12*(t.year()-n.year())+(t.month()-n.month()),e=n.clone().add(r,b),s=t-e<0,i=n.clone().add(r+(s?-1:1),b);return+(-(r+(t-e)/(s?e-i:i-e))||0)},a:function(u){return u<0?Math.ceil(u)||0:Math.floor(u)},p:function(u){return{M:b,y:O,w:_,d:y,D:T,h:S,m:v,s:M,ms:E,Q:U}[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(u){return u===void 0}},A="en",H={};H[A]=at;var J=function(u){return u instanceof I},F=function u(n,t,r){var e;if(!n)return A;if(typeof n=="string"){var s=n.toLowerCase();H[s]&&(e=s),t&&(H[s]=t,e=s);var i=n.split("-");if(!e&&i.length>1)return u(i[0])}else{var c=n.name;H[c]=n,e=c}return!r&&e&&(A=e),e||!r&&A},p=function(u,n){if(J(u))return u.clone();var t=typeof n=="object"?n:{};return t.date=u,t.args=arguments,new I(t)},f=ot;f.l=F,f.i=J,f.w=function(u,n){return p(u,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var I=function(){function u(t){this.$L=F(t.locale,null,!0),this.parse(t)}var n=u.prototype;return n.parse=function(t){this.$d=function(r){var e=r.date,s=r.utc;if(e===null)return new Date(NaN);if(f.u(e))return new Date;if(e instanceof Date)return new Date(e);if(typeof e=="string"&&!/Z$/i.test(e)){var i=e.match(st);if(i){var c=i[2]-1||0,$=(i[7]||"0").substring(0,3);return s?new Date(Date.UTC(i[1],c,i[3]||1,i[4]||0,i[5]||0,i[6]||0,$)):new Date(i[1],c,i[3]||1,i[4]||0,i[5]||0,i[6]||0,$)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},n.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},n.$utils=function(){return f},n.isValid=function(){return this.$d.toString()!==L},n.isSame=function(t,r){var e=p(t);return this.startOf(r)<=e&&e<=this.endOf(r)},n.isAfter=function(t,r){return p(t)<this.startOf(r)},n.isBefore=function(t,r){return this.endOf(r)<p(t)},n.$g=function(t,r,e){return f.u(t)?this[r]:this.set(e,t)},n.unix=function(){return Math.floor(this.valueOf()/1e3)},n.valueOf=function(){return this.$d.getTime()},n.startOf=function(t,r){var e=this,s=!!f.u(r)||r,i=f.p(t),c=function(W,w){var N=f.w(e.$u?Date.UTC(e.$y,w,W):new Date(e.$y,w,W),e);return s?N:N.endOf(y)},$=function(W,w){return f.w(e.toDate()[W].apply(e.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(w)),e)},d=this.$W,D=this.$M,C=this.$D,x="set"+(this.$u?"UTC":"");switch(i){case O:return s?c(1,0):c(31,11);case b:return s?c(1,D):c(0,D+1);case _:var k=this.$locale().weekStart||0,P=(d<k?d+7:d)-k;return c(s?C-P:C+(6-P),D);case y:case T:return $(x+"Hours",0);case S:return $(x+"Minutes",1);case v:return $(x+"Seconds",2);case M:return $(x+"Milliseconds",3);default:return this.clone()}},n.endOf=function(t){return this.startOf(t,!1)},n.$set=function(t,r){var e,s=f.p(t),i="set"+(this.$u?"UTC":""),c=(e={},e[y]=i+"Date",e[T]=i+"Date",e[b]=i+"Month",e[O]=i+"FullYear",e[S]=i+"Hours",e[v]=i+"Minutes",e[M]=i+"Seconds",e[E]=i+"Milliseconds",e)[s],$=s===y?this.$D+(r-this.$W):r;if(s===b||s===O){var d=this.clone().set(T,1);d.$d[c]($),d.init(),this.$d=d.set(T,Math.min(this.$D,d.daysInMonth())).$d}else c&&this.$d[c]($);return this.init(),this},n.set=function(t,r){return this.clone().$set(t,r)},n.get=function(t){return this[f.p(t)]()},n.add=function(t,r){var e,s=this;t=Number(t);var i=f.p(r),c=function(D){var C=p(s);return f.w(C.date(C.date()+Math.round(D*t)),s)};if(i===b)return this.set(b,this.$M+t);if(i===O)return this.set(O,this.$y+t);if(i===y)return c(1);if(i===_)return c(7);var $=(e={},e[v]=l,e[S]=j,e[M]=a,e)[i]||1,d=this.$d.getTime()+t*$;return f.w(d,this)},n.subtract=function(t,r){return this.add(-1*t,r)},n.format=function(t){var r=this,e=this.$locale();if(!this.isValid())return e.invalidDate||L;var s=t||"YYYY-MM-DDTHH:mm:ssZ",i=f.z(this),c=this.$H,$=this.$m,d=this.$M,D=e.weekdays,C=e.months,x=function(w,N,Z,z){return w&&(w[N]||w(r,s))||Z[N].slice(0,z)},k=function(w){return f.s(c%12||12,w,"0")},P=e.meridiem||function(w,N,Z){var z=w<12?"AM":"PM";return Z?z.toLowerCase():z},W={YY:String(this.$y).slice(-2),YYYY:this.$y,M:d+1,MM:f.s(d+1,2,"0"),MMM:x(e.monthsShort,d,C,3),MMMM:x(C,d),D:this.$D,DD:f.s(this.$D,2,"0"),d:String(this.$W),dd:x(e.weekdaysMin,this.$W,D,2),ddd:x(e.weekdaysShort,this.$W,D,3),dddd:D[this.$W],H:String(c),HH:f.s(c,2,"0"),h:k(1),hh:k(2),a:P(c,$,!0),A:P(c,$,!1),m:String($),mm:f.s($,2,"0"),s:String(this.$s),ss:f.s(this.$s,2,"0"),SSS:f.s(this.$ms,3,"0"),Z:i};return s.replace(ut,function(w,N){return N||W[w]||i.replace(":","")})},n.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},n.diff=function(t,r,e){var s,i=f.p(r),c=p(t),$=(c.utcOffset()-this.utcOffset())*l,d=this-c,D=f.m(this,c);return D=(s={},s[O]=D/12,s[b]=D,s[U]=D/3,s[_]=(d-$)/6048e5,s[y]=(d-$)/864e5,s[S]=d/j,s[v]=d/l,s[M]=d/a,s)[i]||d,e?D:f.a(D)},n.daysInMonth=function(){return this.endOf(b).$D},n.$locale=function(){return H[this.$L]},n.locale=function(t,r){if(!t)return this.$L;var e=this.clone(),s=F(t,r,!0);return s&&(e.$L=s),e},n.clone=function(){return f.w(this.$d,this)},n.toDate=function(){return new Date(this.valueOf())},n.toJSON=function(){return this.isValid()?this.toISOString():null},n.toISOString=function(){return this.$d.toISOString()},n.toString=function(){return this.$d.toUTCString()},u}(),et=I.prototype;return p.prototype=et,[["$ms",E],["$s",M],["$m",v],["$H",S],["$W",y],["$M",b],["$y",O],["$D",T]].forEach(function(u){et[u[1]]=function(n){return this.$g(n,u[0],u[1])}}),p.extend=function(u,n){return u.$i||(u(n,I,p),u.$i=!0),p},p.locale=F,p.isDayjs=J,p.unix=function(u){return p(1e3*u)},p.en=H[A],p.Ls=H,p.p={},p})})(X);var R=X.exports;const tt=h=>h[h.length-1];function rt(h,o){const a=K(void 0);let l=null;const j=()=>{const y=typeof o=="string"&&["d","h","s","m","ms"].includes(tt(o))&&tt(o),_=y?+o.slice(0,o.length):+o;l=+R().add(_,y||"m")},E=()=>l>+R();let M=!1;function v(){const[S,y]=a.use(),[_,b]=m.useState(),[U,O]=m.useState(M),T=async()=>{if(!M){M=!0,O(!0);try{const L=await h();y(L),j()}catch(L){b(L)}M=!1,O(!1)}};return m.useEffect(()=>{(!S||S&&E())&&T()},[]),{data:S,error:_,loading:U,refresh:T}}return v.clear=()=>a.reset(),v.data=()=>a.val,v}function it(h,o){var M;const a=B.createContext(h),l=new Set,j=(v,S)=>l.forEach(y=>y(v,S)),E=(M=class extends B.Component{constructor(){super(...arguments);V(this,"state",this.props.initial||h||{})}componentDidMount(){l.add((y,_)=>this.setState(y,_))}componentWillUnmount(){l.clear()}render(){return B.createElement(a.Provider,{value:this.state},this.props.children)}},V(M,"displayName",o),M);return{ctx:a,setState:j,Provider:E}}g.EventBus=Q,g.createCache=rt,g.createGlobalState=K,g.createStore=it,Object.defineProperties(g,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
